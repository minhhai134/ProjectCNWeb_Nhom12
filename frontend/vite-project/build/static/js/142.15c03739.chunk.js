"use strict";(self.webpackChunkchat=self.webpackChunkchat||[]).push([[142,145,263],{77263:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Z});var i=n(65043),r=n(96446),s=n(88911),o=n(85865),a=n(39336),l=n(96391),c=n(10850),d=new Map;d.set("bold",(function(e){return i.createElement(i.Fragment,null,i.createElement("circle",{cx:"116",cy:"116",r:"84",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),i.createElement("line",{x1:"175.4",y1:"175.4",x2:"224",y2:"224",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}))})),d.set("duotone",(function(e){return i.createElement(i.Fragment,null,i.createElement("circle",{cx:"116",cy:"116",r:"84",opacity:"0.2"}),i.createElement("circle",{cx:"116",cy:"116",r:"84",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),i.createElement("line",{x1:"175.4",y1:"175.4",x2:"224",y2:"224",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))})),d.set("fill",(function(){return i.createElement(i.Fragment,null,i.createElement("path",{d:"M176,116a60,60,0,1,1-60-60A60,60,0,0,1,176,116Zm53.6,113.7A8,8,0,0,1,224,232a8.3,8.3,0,0,1-5.7-2.3l-43.2-43.3a92.2,92.2,0,1,1,11.3-11.3l43.2,43.2A8,8,0,0,1,229.6,229.7ZM116,192a76,76,0,1,0-76-76A76.1,76.1,0,0,0,116,192Z"}))})),d.set("light",(function(e){return i.createElement(i.Fragment,null,i.createElement("circle",{cx:"116",cy:"116",r:"84",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),i.createElement("line",{x1:"175.4",y1:"175.4",x2:"224",y2:"224",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}))})),d.set("thin",(function(e){return i.createElement(i.Fragment,null,i.createElement("circle",{cx:"116",cy:"116",r:"84",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),i.createElement("line",{x1:"175.4",y1:"175.4",x2:"224",y2:"224",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}))})),d.set("regular",(function(e){return i.createElement(i.Fragment,null,i.createElement("circle",{cx:"116",cy:"116",r:"84",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),i.createElement("line",{x1:"175.4",y1:"175.4",x2:"224",y2:"224",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))}));var u=function(e,t){return(0,l.$)(e,t,d)},h=(0,i.forwardRef)((function(e,t){return i.createElement(c.A,Object.assign({ref:t},e,{renderPath:u}))}));h.displayName="MagnifyingGlass";const p=h;var x=n(31802),g=n(26240),m=n(93252),f=n(17392),j=n(689),v=n(29962),A=n(70579);const b=()=>{const e=(0,g.A)(),[t,n]=i.useState(0);return(0,A.jsx)(r.A,{sx:{zIndex:10,position:"absolute",bottom:0,width:"100vw",backgroundColor:e.palette.background.paper,boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.25)"},children:(0,A.jsxs)(s.A,{sx:{width:"100%"},direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,p:2,children:[v.Ok.map((i=>i.index===t?(0,A.jsx)(r.A,{sx:{backgroundColor:e.palette.primary.main,borderRadius:1.5},p:1,children:(0,A.jsx)(f.A,{sx:{width:"max-content",color:"#ffffff"},children:i.icon})}):(0,A.jsx)(f.A,{onClick:()=>{var e;e=i.index,n(e)},sx:{width:"max-content",color:"light"===e.palette.mode?"#080707":e.palette.text.primary},children:i.icon}))),(0,A.jsx)(j.A,{})]})})};var k=n(98780),w=n(81045),y=n(34535),C=n(90310),S=n(79456),E=(n(63326),n(61358));const L=(0,y.Ay)(r.A)((e=>{let{theme:t}=e;return{"&:hover":{cursor:"pointer"}}})),F=(0,y.Ay)(k.A)((e=>{let{theme:t}=e;return{"& .MuiBadge-badge":{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(t.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}})),I=e=>{let{img:t,displayName:n,msg:i,time:r,unread:a,online:l,id:c,isSearching:d,onClick:u}=e;const{currentConversationId:h,isFirstLogin:p}=(0,S.d4)((e=>e.conversation)),x=!p&&h===c,m=(0,g.A)();return(0,A.jsx)(L,{onClick:u,sx:{width:"100%",borderRadius:1,backgroundColor:x?"light"===m.palette.mode?(0,C.X4)(m.palette.primary.main,.5):m.palette.primary.main:"light"===m.palette.mode?"#fff":m.palette.background.paper},p:2,children:(0,A.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,A.jsxs)(s.A,{direction:"row",spacing:2,children:[l?(0,A.jsx)(F,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:(0,A.jsx)(w.A,{alt:n,src:t})}):(0,A.jsx)(w.A,{alt:n,src:t}),(0,A.jsxs)(s.A,{spacing:.3,children:[(0,A.jsx)(o.A,{variant:"subtitle2",children:n}),(0,A.jsx)(o.A,{variant:"caption",children:(f=i,j=20,(null===f||void 0===f?void 0:f.length)>j?"".concat(null===f||void 0===f?void 0:f.slice(0,j),"..."):f)})]})]}),(0,A.jsxs)(s.A,{spacing:2,alignItems:"center",children:[(0,A.jsx)(o.A,{sx:{fontWeight:600},variant:"caption",children:r}),(0,A.jsx)(k.A,{className:"unread-count",color:"primary",badgeContent:a})]})]})});var f,j},M=(0,y.Ay)("div")((e=>{let{theme:t}=e;return{position:"relative",borderRadius:20,backgroundColor:(0,C.X4)(t.palette.background.paper,1),marginRight:t.spacing(2),marginLeft:0,width:"100%"}})),T=(0,y.Ay)("div")((e=>{let{theme:t}=e;return{padding:t.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}}));var _=n(25673);const B=(0,y.Ay)(_.Ay)((e=>{let{theme:t}=e;return{color:"inherit","& .MuiInputBase-input":{padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),width:"100%"}}}));var N=n(45453),R=n(86252),P=n(46560),H=n(79206),W=n(64),O=n(78369);const Z=()=>{const e=(0,g.A)(),t=(0,m.A)("up","md"),n=(0,S.wA)(),{user_id:l}=(0,S.d4)((e=>e.auth)),{conversationsList:c}=(0,S.d4)((e=>e.conversation)),[d,u]=(0,i.useState)(""),[h,f]=(0,i.useState)([]),[j,v]=(0,i.useState)(null),[k,w]=(0,i.useState)(!1);(0,i.useEffect)((()=>{if(l)return(0,N.cH)(l),n((0,E.dU)()),N.sZ.on("trans-msg",(e=>{n((0,E.zQ)({message:e}))})),N.sZ.on("searchUserResult",(e=>{console.log("Search results received:",e),f(e)})),()=>{(0,N.G1)(),N.sZ.off("trans-msg"),N.sZ.off("searchUserResult")}}),[n,l]);const y=e=>{const t=(0,R.H)(e),n=new Date,i=new Date(t.getTime());return(0,P.r)(i,n)?(0,H.GP)(i,"HH:mm",{locale:O.vi}):(0,H.GP)(i,"dd/MM/yyyy",{locale:O.vi})};async function C(e,t){try{const n=await fetch(e,t);if(!n.ok){const e=await n.text();throw new Error("Network response was not ok: ".concat(e))}return await n.json()}catch(n){return console.error("Error creating document:",n),null}}const L=c.slice().sort(((e,t)=>{var n,i,r,s;const o=e.latestMessage&&(0,W.f)((0,R.H)(null===(n=e.latestMessage)||void 0===n?void 0:n.sentTime))?(0,R.H)(null===(i=e.latestMessage)||void 0===i?void 0:i.sentTime):e.lastActive&&(0,W.f)((0,R.H)(e.lastActive))?(0,R.H)(e.lastActive):new Date(0);return(t.latestMessage&&(0,W.f)((0,R.H)(null===(r=t.latestMessage)||void 0===r?void 0:r.sentTime))?(0,R.H)(null===(s=t.latestMessage)||void 0===s?void 0:s.sentTime):t.lastActive&&(0,W.f)((0,R.H)(t.lastActive))?(0,R.H)(t.lastActive):new Date(0))-o}));if(j){const e=L.findIndex((e=>e._id===j));if(e>-1){const[t]=L.splice(e,1);L.unshift(t)}}return(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)(r.A,{sx:{position:"relative",height:"100%",width:t?320:"100vw",backgroundColor:"light"===e.palette.mode?"#F8FAFF":e.palette.background,boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.25)"},children:[!t&&(0,A.jsx)(b,{}),(0,A.jsxs)(s.A,{p:3,spacing:2,sx:{maxHeight:"100vh"},children:[(0,A.jsx)(s.A,{alignItems:"center",justifyContent:"space-between",direction:"row",children:(0,A.jsx)(o.A,{variant:"h5",children:"Chats"})}),(0,A.jsx)(s.A,{sx:{width:"100%"},children:(0,A.jsxs)(M,{children:[(0,A.jsx)(T,{children:(0,A.jsx)(p,{color:"#709CE6"})}),(0,A.jsx)(B,{placeholder:"Search\u2026",inputProps:{"aria-label":"search"},value:d,onChange:e=>{const t=e.target.value;if(u(t),t.length>0){const e={userID:l,searchStr:t};N.sZ&&(N.sZ.emit("search_user",e),console.log("Searching for user:",e))}else f([])}})]})}),(0,A.jsx)(a.A,{}),(0,A.jsx)(s.A,{sx:{flexGrow:1,overflow:"scroll",height:"100%"},children:(0,A.jsx)(x.N,{timeout:500,clickOnTrack:!1,children:(0,A.jsxs)(s.A,{spacing:2.4,children:[h.length>0&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(o.A,{variant:"subtitle2",sx:{color:"#676667"},children:"Search Results"}),h.map(((e,t)=>(0,A.jsx)(I,{displayName:e._id===l?"B\u1ea1n":e.displayName,onClick:()=>(async e=>{try{const t="http://localhost:8000/api/conversation",i=[l.toString(),e.toString()];let r=new URLSearchParams;r.append("members",i);const s={method:"PUT",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()};let o=await C(t,s);if(console.log(o),!o||!o.data||!o.data._id){console.warn("PUT request did not return a valid conversation, attempting to create a new one",o);const e={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()};if(o=await C(t,e),console.log(o),!o||!o.data||!o.data._id)throw new Error("Failed to create or find conversation.")}const a=o.data._id;n((0,E.eM)({conversationId:a})),v(a),n((0,E.dU)()),u(""),f([])}catch(t){console.error("Error handling search result click:",t)}})(e._id)},t))),(0,A.jsx)(a.A,{})]}),(0,A.jsx)(o.A,{variant:"subtitle2",sx:{color:"#676667"},children:"All Chats"}),L.map(((e,t)=>{var i,r,s,o;return(0,A.jsx)(I,{...e,displayName:e.members[0].displayName,msg:l===(null===(i=e.latestMessage)||void 0===i?void 0:i.sender)?"B\u1ea1n: ".concat(null===(r=e.latestMessage)||void 0===r?void 0:r.content):(null===(s=e.latestMessage)||void 0===s?void 0:s.content)||"No message",time:e.latestMessage?y(null===(o=e.latestMessage)||void 0===o?void 0:o.sentTime)||y(e.lastActive):"",id:e._id,onClick:()=>{n((0,E.eM)({conversationId:e._id})),v()}},t)}))]})})})]})]})})}},79145:(e,t,n)=>{n.r(t),n.d(t,{Conversation:()=>X,default:()=>V});var i=n(96446),r=n(88911),s=n(65043),o=n(26240),a=n(31802),l=n(34535),c=n(98780),d=n(81045),u=n(85865),h=n(39336),p=n(17392),x=n(39778),g=n(56258),m=n(37970),f=n(89453),j=n(93252),v=n(63326),A=n(79456),b=n(11498),k=n(61358),w=n(70579);const y=(0,l.Ay)(c.A)((e=>{let{theme:t}=e;return{"& .MuiBadge-badge":{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(t.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}})),C=[{title:"Block this user",action:"block"}],S=()=>{const e=(0,A.wA)(),t=(0,j.A)("between","md","xs","sm"),n=(0,o.A)(),{conversationsList:a,currentConversationId:l}=(0,A.d4)((e=>e.conversation)),{user_id:c}=(0,A.d4)((e=>e.auth)),[S,E]=s.useState(null),L=Boolean(S),F=()=>{E(null)};return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(i.A,{p:2,width:"100%",sx:{backgroundColor:"light"===n.palette.mode?"#F8FAFF":n.palette.background,boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.25)"},children:(0,w.jsxs)(r.A,{alignItems:"center",direction:"row",sx:{width:"100%",height:"100%"},justifyContent:"space-between",children:[(0,w.jsxs)(r.A,{onClick:()=>{e((0,v.fy)())},spacing:2,direction:"row",children:[(0,w.jsx)(i.A,{children:(0,w.jsx)(y,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:(0,w.jsx)(d.A,{alt:a.find((e=>e._id===l)).members[0].displayName,src:""})})}),(0,w.jsxs)(r.A,{spacing:.2,children:[(0,w.jsx)(u.A,{variant:"subtitle2",children:a.find((e=>e._id===l)).members[0].displayName}),(0,w.jsx)(u.A,{variant:"caption",children:"Online"})]})]}),(0,w.jsxs)(r.A,{direction:"row",alignItems:"center",spacing:t?1:3,children:[(0,w.jsx)(h.A,{orientation:"vertical",flexItem:!0}),(0,w.jsx)(p.A,{id:"conversation-positioned-button","aria-controls":L?"conversation-positioned-menu":void 0,"aria-haspopup":"true","aria-expanded":L?"true":void 0,onClick:e=>{E(e.currentTarget)},children:(0,w.jsx)(f.A,{})}),(0,w.jsx)(x.A,{MenuListProps:{"aria-labelledby":"fade-button"},TransitionComponent:g.A,id:"conversation-positioned-menu","aria-labelledby":"conversation-positioned-button",anchorEl:S,open:L,onClose:F,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:(0,w.jsx)(i.A,{p:1,children:(0,w.jsx)(r.A,{spacing:1,children:C.map((t=>(0,w.jsxs)(m.A,{onClick:()=>{F(),"block"===t.action&&(async()=>{const t=c,n=new URLSearchParams({convID:l,status:t});try{const i=await b.A.post("/blockStatus",n);console.log("Block status updated successfully:",i.data),e((0,k.Lq)(l,t))}catch(i){console.error("Error updating block status:",i)}})()},children:[(0,w.jsx)(r.A,{sx:{minWidth:100},direction:"row",alignItems:"center",justifyContent:"space-between",children:(0,w.jsx)("span",{children:t.title})})," "]},t.title)))})})})]})]})})})};var E=n(20906),L=n(51787),F=n(78977),I=n(27193),M=n(73381),T=n(70410),_=n(51842),B=n(45453);const N=(0,l.Ay)(E.A)((e=>{let{theme:t}=e;return{"& .MuiInputBase-input":{paddingTop:"12px !important",paddingBottom:"12px !important"}}})),R=e=>{let{openPicker:t,setOpenPicker:n,setValue:i,value:s,inputRef:o}=e;return(0,w.jsx)(N,{inputRef:o,value:s,onChange:e=>{i(e.target.value)},fullWidth:!0,placeholder:"Write a message...",variant:"filled",InputProps:{disableUnderline:!0,startAdornment:(0,w.jsx)(r.A,{sx:{width:"max-content"},children:(0,w.jsx)(r.A,{sx:{position:"relative",display:"inline-block"}})}),endAdornment:(0,w.jsx)(r.A,{sx:{position:"relative"},children:(0,w.jsx)(L.A,{children:(0,w.jsx)(p.A,{onClick:()=>{n(!t)},children:(0,w.jsx)(I.A,{})})})})}})},P=()=>{const e=(0,o.A)(),t=(0,A.wA)(),{conversationsList:n,currentConversationId:a}=(0,A.d4)((e=>e.conversation)),l=n.find((e=>e._id===a)),c=window.localStorage.getItem("user_id"),d=(0,j.A)("between","md","xs","sm"),{sideBar:h}=(0,A.d4)((e=>e.app)),[x,g]=s.useState(!1),[m,f]=(0,s.useState)(""),v=(0,s.useRef)(null);const y=l.blockStatus===c,C=""!==l.blockStatus&&l.blockStatus!==c;return(0,w.jsx)(i.A,{sx:{position:"relative",backgroundColor:"transparent !important"},children:(0,w.jsx)(i.A,{p:d?1:2,width:"100%",sx:{backgroundColor:"light"===e.palette.mode?"#F8FAFF":e.palette.background,boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.25)"},children:y?(0,w.jsxs)(r.A,{alignItems:"center",spacing:2,children:[(0,w.jsx)(u.A,{children:"B\u1ea1n \u0111\xe3 ch\u1eb7n ng\u01b0\u1eddi d\xf9ng n\xe0y v\xe0 kh\xf4ng th\u1ec3 g\u1eedi hay nh\u1eadn tin nh\u1eafn \u0111\u1ebfn h\u1ecd"}),(0,w.jsx)(F.A,{variant:"contained",color:"secondary",onClick:()=>(async e=>{try{const n=new URLSearchParams({convID:a,status:e}),i=await b.A.post("/blockStatus",n);console.log("Block status updated successfully:",i.data),t((0,k.Lq)(a,e))}catch(n){console.error("Error updating block status:",n)}})(""),children:"B\u1ecf ch\u1eb7n"})]}):C?(0,w.jsx)(u.A,{children:"B\u1ea1n \u0111\xe3 b\u1ecb ng\u01b0\u1eddi d\xf9ng n\xe0y ch\u1eb7n v\xe0 kh\xf4ng th\u1ec3 g\u1eedi hay nh\u1eadn tin nh\u1eafn \u0111\u1ebfn h\u1ecd"}):(0,w.jsxs)(r.A,{direction:"row",alignItems:"center",spacing:d?1:3,children:[(0,w.jsxs)(r.A,{sx:{width:"100%"},children:[(0,w.jsx)(i.A,{style:{zIndex:10,position:"fixed",display:x?"inline":"none",bottom:81,right:d?20:h.open?420:100},children:(0,w.jsx)(_.A,{theme:e.palette.mode,data:T,onEmojiSelect:e=>{!function(e){const t=v.current;if(t){const n=t.selectionStart,i=t.selectionEnd;f(m.substring(0,n)+e+m.substring(i)),t.selectionStart=t.selectionEnd=n+1}}(e.native)}})}),(0,w.jsx)(R,{inputRef:v,value:m,setValue:f,openPicker:x,setOpenPicker:g})]}),(0,w.jsx)(i.A,{sx:{height:48,width:48,backgroundColor:e.palette.primary.main,borderRadius:1.5},children:(0,w.jsx)(r.A,{sx:{height:"100%"},alignItems:"center",justifyContent:"center",children:(0,w.jsx)(p.A,{onClick:()=>{const e=n.find((e=>e._id===a)).members[0]._id,i={conversation:a,sender:c,receiver:e,sentTime:(new Date).toISOString(),content:m};B.sZ.emit("sendMsg",i),t((0,k.o5)({message:i})),t((0,k.zQ)({message:i})),f(""),t((0,k.AG)(i))},children:(0,w.jsx)(M.A,{color:"#ffffff"})})})})]})})})};var H=n(86252),W=n(46560),O=n(79206),Z=n(78369),z=n(90310),D=n(83540),U=n(29962);n(57818),n(80675);const G=()=>{const[e,t]=s.useState(null),n=Boolean(e),i=()=>{t(null)};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(D.A,{size:20,id:"basic-button","aria-controls":n?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":n?"true":void 0,onClick:e=>{t(e.currentTarget)}}),(0,w.jsx)(x.A,{id:"basic-menu",anchorEl:e,open:n,onClose:i,MenuListProps:{"aria-labelledby":"basic-button"},children:(0,w.jsx)(r.A,{spacing:1,px:1,children:U.zB.map((e=>(0,w.jsx)(m.A,{onClick:i,children:e.title},e.title)))})})]})},q=e=>{let{content:t,sentTime:n,incoming:s,menu:a}=e;const l=(0,o.A)();return(0,w.jsxs)(r.A,{direction:"column",children:[(0,w.jsxs)(r.A,{direction:"row",justifyContent:s?"start":"end",children:[(0,w.jsx)(i.A,{px:1.5,py:1.5,sx:{backgroundColor:s?(0,z.X4)(l.palette.background.default,1):l.palette.primary.main,borderRadius:1.5,width:"max-content"},children:(0,w.jsx)(u.A,{variant:"body2",color:s?l.palette.text:"#fff",children:t})}),a&&(0,w.jsx)(G,{})]}),(0,w.jsx)(i.A,{px:10,py:.5,sx:{width:"100%"},children:(0,w.jsx)(u.A,{variant:"caption",sx:{color:l.palette.text,display:"block",textAlign:s?"left":"right"},children:n})})]})},Q=window.localStorage.getItem("user_id"),X=e=>{let{isMobile:t,menu:n}=e;const{current_messages:s}=(0,A.d4)((e=>e.conversation)),o=e=>{const t=(0,H.H)(e),n=new Date,i=new Date(t.getTime());return(0,W.r)(i,n)?(0,O.GP)(i,"HH:mm",{locale:Z.vi}):(0,O.GP)(i,"dd/MM/yyyy",{locale:Z.vi})};return(0,w.jsx)(i.A,{p:t?1:3,children:(0,w.jsx)(r.A,{spacing:3,children:s.map(((e,t)=>(0,w.jsx)(q,{content:e.content,incoming:e.sender!==Q,sentTime:o(e.sentTime),menu:n},t)))})})},V=()=>{const e=(0,j.A)("between","md","xs","sm"),t=(0,o.A)(),n=(0,s.useRef)(null),{current_messages:l}=(0,A.d4)((e=>e.conversation)),c=(0,A.wA)();return(0,s.useEffect)((()=>(B.sZ.on("trans-msg",(e=>{c((0,k.o5)({message:e})),c((0,k.zQ)({message:e}))})),()=>{B.sZ.off("trans-msg")})),[c]),(0,s.useEffect)((()=>{n.current.scrollTop=n.current.scrollHeight}),[l]),(0,w.jsxs)(r.A,{height:"100%",maxHeight:"100vh",width:e?"100vw":"auto",children:[(0,w.jsx)(S,{}),(0,w.jsx)(i.A,{ref:n,width:"100%",sx:{position:"relative",flexGrow:1,overflow:"scroll",backgroundColor:"light"===t.palette.mode?"#F0F4FA":t.palette.background,boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.25)"},children:(0,w.jsx)(a.N,{timeout:500,clickOnTrack:!1,children:(0,w.jsx)(X,{menu:!0,isMobile:e})})}),(0,w.jsx)(P,{})]})}},30142:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var i=n(65043),r=n(26240),s=n(88911),o=n(96446),a=n(85865),l=n(35475),c=n(79145),d=n(77263),u=n(70579);function h(e){let{...t}=e;(0,r.A)().palette.primary.main;return(0,u.jsx)(o.A,{...t,children:(0,u.jsxs)("svg",{width:"200px",height:"200px",viewBox:"0 0 51 50",children:[(0,u.jsxs)("rect",{y:"0",width:"13",height:"50",fill:"#1fa2ff",children:[(0,u.jsx)("animate",{attributeName:"height",values:"50;10;50",begin:"0s",dur:"1s",repeatCount:"indefinite"}),(0,u.jsx)("animate",{attributeName:"y",values:"0;20;0",begin:"0s",dur:"1s",repeatCount:"indefinite"})]}),(0,u.jsxs)("rect",{x:"19",y:"0",width:"13",height:"50",fill:"#12d8fa",children:[(0,u.jsx)("animate",{attributeName:"height",values:"50;10;50",begin:"0.2s",dur:"1s",repeatCount:"indefinite"}),(0,u.jsx)("animate",{attributeName:"y",values:"0;20;0",begin:"0.2s",dur:"1s",repeatCount:"indefinite"})]}),(0,u.jsxs)("rect",{x:"38",y:"0",width:"13",height:"50",fill:"#06ffcb",children:[(0,u.jsx)("animate",{attributeName:"height",values:"50;10;50",begin:"0.4s",dur:"1s",repeatCount:"indefinite"}),(0,u.jsx)("animate",{attributeName:"y",values:"0;20;0",begin:"0.4s",dur:"1s",repeatCount:"indefinite"})]})]})})}const p=(0,i.memo)(h);var x=n(79456);const g=()=>{const[e]=(0,l.ok)(),t=(0,r.A)(),{sideBar:n}=(0,x.d4)((e=>e.app)),{isFirstLogin:i}=(0,x.d4)((e=>e.conversation));return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(s.A,{direction:"row",sx:{width:"100%"},children:[(0,u.jsx)(d.default,{}),(0,u.jsx)(o.A,{sx:{height:"100%",width:n.open?"calc(100vw - 740px )":"calc(100vw - 420px )",backgroundColor:"light"===t.palette.mode?"#FFF":t.palette.background.paper,borderBottom:"individual-chat"===e.get("type")&&e.get("id")?"0px":"6px solid #0162C4"},children:i?(0,u.jsxs)(s.A,{spacing:2,sx:{height:"100%",width:"100%"},alignItems:"center",justifyContent:"center",children:[(0,u.jsx)(p,{}),(0,u.jsxs)(a.A,{variant:"subtitle2",children:["Select a conversation or start a"," ",(0,u.jsx)(l.N_,{style:{color:t.palette.primary.main,textDecoration:"none"},to:"/",children:"new one"})]})]}):(0,u.jsx)(c.default,{})})]})})}}}]);
//# sourceMappingURL=142.15c03739.chunk.js.map